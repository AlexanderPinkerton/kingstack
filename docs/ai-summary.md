# ğŸ‘‘ AI Summary: KingStack Monorepo

## Overview
KingStack is a modern, full-stack TypeScript monorepo designed for rapid development of scalable applications. It leverages a powerful set of technologies for both frontend and backend, unified by a monorepo structure for shared dependencies and code reuse.

---

## ğŸ› ï¸ Technologies Used

- **Yarn v4 Workspaces**: Manages dependencies and packages across the monorepo.
- **Turborepo**: Orchestrates builds, development, linting, and testing pipelines for all workspaces.
- **ESLint 9**: Provides a unified linting configuration for code quality.
- **NestJS**: Backend framework for building scalable APIs (in `apps/nest`).
- **Next.js**: Frontend React framework for Serverless functions, SSR and SSG (in `apps/next`).
- **ShadCN + Tailwind CSS**: Modern UI component library and utility-first styling for the frontend.
- **Prisma**: Type-safe ORM for database access, with shared schema in `packages/prisma`.
- **Supabase**: Provides authentication and database services (integrated in frontend and backend).
- **Bun**: Used for running local scripts.

---

## ğŸ“ File & Directory Structure

```
kingstack/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ next/            # Next.js app (public website + serverless api)
â”‚   â””â”€â”€ nest/            # NestJS app (API, logic, jobs, realtime)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ eslint-config/   # Shared ESLint config
â”‚   â”œâ”€â”€ prisma/          # Shared Prisma schema + generated client
â”‚   â””â”€â”€ shapes/          # Shared data/model shapes (DSS, VDS, DTS)
â”œâ”€â”€ .env, .env.docker    # Environment configs
â”œâ”€â”€ docker-compose.yml   # Multi-service Docker orchestration
â”œâ”€â”€ package.json         # Root config (workspaces, scripts)
â”œâ”€â”€ turbo.json           # Turborepo pipeline config
â”œâ”€â”€ yarn.lock            # Yarn lockfile
â””â”€â”€ readme.md            # Main documentation
```

### Notable Subfolders
- `apps/next/src/` â€” React components, pages, stores, context, and UI logic.
- `apps/nest/src/` â€” NestJS modules, controllers, services, and scripts.
- `packages/prisma/` â€” `schema.prisma` and migration files for DB.
- `packages/shapes/` â€” TypeScript types for data transfer and state shapes.
- `packages/eslint-config/` â€” Centralized ESLint settings for all workspaces.

---

## ğŸ”— How Things Are Wired Together

### Monorepo & Workspace Management
- **Yarn Workspaces** are defined in the root `package.json`, enabling shared dependencies and workspace commands.
- **Turborepo** (`turbo.json`) manages scripts for dev, build, lint, and test, ensuring tasks run in the correct order across workspaces.

### Backend Server and API (NestJS)
- Located in `apps/nest`.
- Uses NestJS modules for API structure (`app.module.ts`, `posts.module.ts`, etc.).
- Database access via Prisma Client, generated from the shared schema.
- Auth handled via JWT and Supabase integration.
- Dockerfile provided for containerized builds.

### Frontend & Serverless APIs (Next.js)
- Located in `apps/next`.
- Uses Next.js for SSR/SSG, with UI built from ShadCN components and styled with Tailwind CSS.
- State management with MobX (stores in `src/stores/`).
- Supabase client for auth and session management.

### Shared Packages
- **Prisma**: `packages/prisma` contains the schema and generates the client for both backend and (optionally) frontend.
- **Shapes**: `packages/shapes` holds TypeScript types for DSS (Domain State Shape), VDS (View Data Shape), and DTS (Data Transfer Shape), promoting type safety and DRY code.
- **ESLint Config**: Centralized config in `packages/eslint-config` ensures consistent linting rules.


## ğŸš€ Getting Started

1. **Install dependencies:**
   ```bash
   yarn install
   ```
2. **Generate Prisma client:**
   ```bash
   yarn workspace @kingstack/prisma prisma generate
   ```
3. **Start development:**
   ```bash
   yarn dev
   ```
4. **Build all apps:**
   ```bash
   yarn build
   ```
5. **Run linting/tests:**
   ```bash
   yarn lint
   yarn test
   ```

---

## ğŸ“ Notes
- Environment variables are managed via `.env` files at both root and app levels.
- See individual `README.md` files in `apps/next` and `apps/nest` for more details on each app.
- For advanced orchestration, use `docker-compose.yml` to spin up all services.

---

*This file was generated by AI for a high-level summary. For detailed instructions, see the main `readme.md` and app-specific docs.*